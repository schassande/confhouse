<div class="general-config">
  @if (currentForm(); as form) {
  <form [formGroup]="form" class="config-form">
    <!-- Name Field -->
    <div class="form-section">
      <label for="name" class="form-label">
        {{ 'CONFERENCE.CONFIG.GENERAL.NAME' | translate }}
        <span class="required">*</span>
      </label>
      <input
        id="name"
        pInputText
        formControlName="name"
        type="text"
        placeholder="Nom de la conférence"
      />
      @if (form.get('name')?.invalid && form.get('name')?.touched) {
      <small class="error-message">
        {{ 'VALIDATION.REQUIRED' | translate }}
      </small>
      }
    </div>

    <!-- Edition Field -->
    <div class="form-section">
      <label for="edition" class="form-label">
        {{ 'CONFERENCE.CONFIG.GENERAL.EDITION' | translate }}
        <span class="required">*</span>
      </label>
      <input
        id="edition"
        pInputText
        formControlName="edition"
        type="number"
        class="edition-input"
      />
      @if (form.get('edition')?.invalid && form.get('edition')?.touched) {
      <small class="error-message">
        {{ 'VALIDATION.REQUIRED' | translate }}
      </small>
      }
    </div>

    <!-- Location Field -->
    <div class="form-section">
      <label for="location" class="form-label">
        {{ 'CONFERENCE.CONFIG.GENERAL.LOCATION' | translate }}
        <span class="required">*</span>
      </label>
      <input
        id="location"
        pInputText
        formControlName="location"
        type="text"
        placeholder="Lieu de la conférence"
      />
      @if (form.get('location')?.invalid && form.get('location')?.touched) {
      <small class="error-message">
        {{ 'VALIDATION.REQUIRED' | translate }}
      </small>
      }
    </div>
    <!-- Languages Field -->
    <div class="form-section">
      <label for="languages" class="form-label">
        {{ 'CONFERENCE.CONFIG.GENERAL.LANGUAGES' | translate }}
        <span class="required">*</span>
      </label>
      <p-multiSelect
        id="languages"
        [options]="languageOptions()"
        formControlName="languages"
        optionLabel="label"
        optionValue="value"
        [showToggleAll]="false"
        display="comma"
        placeholder="Sélectionnez les langues"
      ></p-multiSelect>
      @if (form.get('languages')?.invalid && form.get('languages')?.touched) {
      <small class="error-message">
        {{ 'VALIDATION.REQUIRED' | translate }}
      </small>
      }
    </div>

    <!-- Logo Field -->
    <div class="form-section">
      <label for="logo" class="form-label">
        {{ 'CONFERENCE.CONFIG.GENERAL.LOGO' | translate }}
      </label>
      <div>
        <input
          id="logo"
          pInputText
          formControlName="logo"
          type="text"
          class="w-full"
          placeholder="URL du logo"
        />
      </div>
    </div>
    @if (form.get('logo')?.value) {
    <div class="logo-preview">
      <img [src]="form.get('logo')?.value" alt="Logo preview" />
    </div>
    }

    <!-- Visible Toggle -->
    <div class="form-section">
      <label for="visible" class="form-label">
        {{ 'CONFERENCE.CONFIG.GENERAL.VISIBLE' | translate }}
      </label>
      <p-toggleButton
        id="visible"
        [onIcon]="'pi pi-check'"
        [offIcon]="'pi pi-times'"
        formControlName="visible"
        onLabel="Visible"
        offLabel="Caché"
      ></p-toggleButton>
    </div>

    <!-- Organizer Emails Field -->
    <div class="form-section">
      <label class="form-label">
        {{ 'CONFERENCE.CONFIG.GENERAL.ORGANIZER_EMAILS' | translate }}
      </label>
      <div>
        <div class="email-input-group">
          <input
            pInputText
            email
            id="emailInput"
            type="email"
            class="email-input"
            #emailInput
            placeholder="adress@email.com"
          />
          <button
            pButton
            type="button"
            icon="pi pi-plus"
            class="p-button-sm"
            (click)="addOrganizerEmail(emailInput.value); emailInput.value = ''"
            [disabled]="!emailInput.checkValidity()"
          ></button>
        </div>
      </div>
    </div>
    <div class="emails-list">
      @for (email of organizerEmails(); track email) {
      <div class="email-tag">
        <span>{{ email }}</span>
        <button
          pButton
          type="button"
          icon="pi pi-times"
          class="p-button-sm p-button-text p-button-danger"
          (click)="removeOrganizerEmail(email)"
        ></button>
      </div>
      }
    </div>
  </form>
  }
</div>
